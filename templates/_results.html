
<div id="results-container" class="card">
  <header class="card-header">
    <p class="card-header-title">Results</p>
  </header>
  <div class="card-content">
    {% if solutions|length == 0 %}
      <p class="has-text-grey">Enter inputs and option rows, then click <strong>Calculate</strong>.</p>
    {% else %}
      <div class="content is-small">
        <p>
          Notional: <strong>{{ inputs.currency }}{{ '{:,.0f}'.format((inputs.notional|float) if inputs.notional else 0) }}</strong>
          &middot; Multiplier: <strong>{{ '{:,.0f}'.format((inputs.multiplier|float) if inputs.multiplier else 0) }}</strong>
          &middot; Spot: <strong>{{ '{:,.2f}'.format((inputs.spot|float) if inputs.spot else 0) }}</strong>
        </p>
      </div>

      <div class="table-container">
        <table class="table is-fullwidth is-striped is-hoverable is-narrow">
          <thead>
            <tr>
              <th>Expiry</th>
              <th class="has-text-right">Strike</th>
              <th class="has-text-right">Ask</th>
              <th class="has-text-right">Premium</th>
              <th class="has-text-right">Notional/Contract</th>
              <th class="has-text-right">Qty (100%)</th>
              <th class="has-text-right">Cost (100%)</th>
              <th>% from Spot</th>
            </tr>
          </thead>
          <tbody>
            {% for s in solutions %}
            <tr>
              <td>{{ s.expiry }}</td>
              <td class="has-text-right">{{ '{:,.2f}'.format(s.strike) }}</td>
              <td class="has-text-right">{{ '{:,.2f}'.format(s.ask) }}</td>
              <td class="has-text-right">{{ '{:,.2f}'.format(s.premium) }}</td>
              <td class="has-text-right">{{ '{:,.0f}'.format(s.per_contract_notional) }}</td>
              <td class="has-text-right">{{ '{:,.3f}'.format(s.qty100) }} <span class="tag is-light is-rounded">ceil {{ s.qty100_ceil }}, floor {{ s.qty100_floor }}</span></td>
              <td class="has-text-right">{{ inputs.currency }}{{ '{:,.2f}'.format(s.cost100) }}</td>
              <td><span class="tag is-info is-light">{{ '%+.2f%%'|format(s.atmPct) }}</span></td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <div class="box">
        {{ chart_html | safe }}
      </div>
    {% endif %}
  </div>
</div>
