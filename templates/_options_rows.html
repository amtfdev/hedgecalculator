
<div id="options-rows-wrapper" class="card">
  <header class="card-header">
    <p class="card-header-title">Put Options</p>
  </header>
  <div class="card-content">
    <div class="table-container">
      <table class="table is-fullwidth is-striped is-hoverable">
        <thead>
          <tr>
            <th>Expiry</th>
            <th class="has-text-right">Strike</th>
            <th class="has-text-right">Ask</th>
            <th class="has-text-right">Fee / Lot</th>
            <th class="has-text-centered">Action</th>
          </tr>
        </thead>
        <tbody>
          {% for o in (options | default([])) %}
          <tr>
            <td><input class="input" type="date" name="expiry[]" value="{{ o.expiry }}"></td>
            <td><input class="input has-text-right" type="number" step="0.01" name="strike[]" value="{{ o.strike if o.strike else '' }}"></td>
            <td><input class="input has-text-right" type="number" step="0.01" name="ask[]" value="{{ o.ask if o.ask else '' }}"></td>
            <td><input class="input has-text-right" type="number" step="0.01" name="fee_lot[]" value="{{ o.fee_lot if o.fee_lot else '' }}"></td>
            <td class="has-text-centered">
              <button class="button is-small"
                hx-post="/"
                hx-include="#options-form"
                hx-vals='{"action":"remove_row","row_index":"{{ loop.index0 }}"}'
                hx-target="#options-rows-wrapper"
                hx-swap="outerHTML">Delete</button>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="buttons">
      <button class="button is-light"
        hx-post="/"
        hx-include="#options-form"
        hx-vals='{"action":"add_row"}'
        hx-target="#options-rows-wrapper"
        hx-swap="outerHTML">+ Add Row</button>
    </div>
  </div>
</div>
